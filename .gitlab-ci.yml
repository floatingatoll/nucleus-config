deploy iowa-b:
  variables:
    KUBECONFIG: /home/gitlab-runner/.kube/iowa-b.kubeconfig
  tags:
    - gcp
    - meao
  only:
    - master
  script:
    - kubectl_1.12 apply -f iowa-b/nucleus-dev
    - kubectl_1.12 rollout status -f iowa-b/nucleus-dev/deploy.yaml -w --timeout=10m
    - kubectl_1.12 apply -f iowa-b/nucleus-stage

deploy frankfurt:
  variables:
    KUBECONFIG: /home/gitlab-runner/.kube/frankfurt.kubeconfig
  tags:
    - aws
    - frankfurt
    - meao
  only:
    - master
    - frankfurt
  script:
    - kubectl_1.13 apply -f frankfurt/nucleus-dev
    - kubectl_1.13 rollout status -f frankfurt/nucleus-dev/deploy.yaml -w --timeout=10m
