# Nucleus Config

## Kubernetes YAML

- CI/CD: [.gitlab-ci.yml](.gitlab-ci.yml)
  - Git branch to deploy job mapping:
    - master
      - frankfurt dev
      - iowa-b dev
      - frankfurt stage
      - iowa-b stage
      - frankfurt prod
      - iowa-b prod
    - frankfurt
      - frankfurt dev
      - frankfurt stage
      - frankfurt prod
    - iowa-b
      - iowa-b dev
      - iowa-b stage
      - iowa-b prod
    - stage
      - frankfurt stage
      - iowa-b stage
    - prod
      - frankfurt prod
      - iowa-b prod
- Cluster: [frankfurt](frankfurt/)
  - Namespace: [nucleus-dev](frankfurt/nucleus-dev/)
    - [Deployment](frankfurt/nucleus-dev/deploy.yaml)
      - derived from Deis Workflow managed Deployment
    - [Service](frankfurt/nucleus-dev/svc.yaml)
      - derived from Deis Workflow managed Service
- Cluster: [iowa-b](iowa-b/)
  - [Namespace](iowa-b/nucleus-dev/nucleus-dev-ns.yaml): [nucleus-dev](iowa-b/nucleus-dev/)
    - [Argo Tunnel](iowa-b/nucleus-dev/argo-tunnel.yaml)
      - may want to move this to its own namespace in a future revision
    - [Deployment](iowa-b/nucleus-dev/deploy.yaml)
      - depends on secrets that are stored encrypted via [sops](https://github.com/mozilla/sops) in a private repo
    - [Ingress](iowa-b/nucleus-dev/ingress.yaml)
      - depends on Argo Tunnel created above and Service below
    - [Service](iowa-b/nucleus-dev/svc.yaml)
      - internal service, no public load balancer needed
